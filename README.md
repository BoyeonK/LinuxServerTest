# windows로는 AWS EC2 프리티어 쌀먹을 할 수가 없어!

- 게임 서버
  - 클라이언트와 UDP통신.
  - 시작된 인게임에서의 통신을 담당.

- HTTPS서버
  - 게임 서버의 자식 프로세스로서 실행됨.
    - 게임 서버와 IPC연결, Unix Domain Socket
    - protobuf 사용
  - node.js로 작성됨.
    - https통신을 사용함. 클라이언트와 접촉은 Cloudflare를 통함.
    - 게임 서버에서 DB를 조작해야 할 경우, HTTPS서버를 통함.
    - 게임을 매칭하기 이전, 로비에서의 요청 담당.
  
- 플레이어의 소지품
  - 창고 : RDBMS 사용 (MySQL, PostgreSQL, 뭘 사용할지 아직 미정)
    - HTTPS서버를 통해서 조작함.
  - 인벤토리 : Redis 그 전투 내에서 죽으면 다 날아감.
    - 인게임서버(player의 세션), HTTPS서버 둘다 조작할 수 있음.
    - 다만 HTTPS서버가 조작할 일은, 게임 종료(생환 or 죽음)시, 최초 게임 시작시 2가지뿐. (트랜잭션 처리 주의)

- TODO:
  - IPC통신 소켓 연결
  - 직렬화 방식은 protobuf를 사용, 프로토콜 정의하기기
  - 최초 연결 진행시, 양방향 통신 가능한지 에코 날려보기
  